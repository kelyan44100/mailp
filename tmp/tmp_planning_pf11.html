
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">


<link href="../css/bootstrap.min.css" rel="stylesheet">
<link href="../font-awesome/css/font-awesome.css" rel="stylesheet">

<!-- Toastr style -->
<link href="../css/plugins/toastr/toastr.min.css" rel="stylesheet">
<style>
.event { height:100%!important;width:100%!important;display:block; }
/* https://stackoverflow.com/questions/3632532/how-can-you-implement-a-grabbing-cursor-icon-in-chrome/25321042 */
.event:hover { cursor: -webkit-grab; cursor: grab; }

/* Loader gif src => http://smallenvelop.com/display-loading-icon-page-loads-completely/ */
/* Style used src => https://css-tricks.com/snippets/css/absolute-center-vertical-horizontal-an-image/ */
html, body, #loader {
   height:100%;
   width: 100%;
   margin: 0;
   padding: 0;
   border: 0;
}
#loader td {
   vertical-align: middle;
   text-align: center;
}

/* Scroll To Top Button */
#btnTop {
    display:none; /* Hidden by default */
    position:fixed; /* Fixed/sticky position */
    bottom:20px; /* Place the button at the bottom of the page */
    right:30px; /* Place the button 30px from the right */
    z-index:99; /* Make sure it does not overlap */
    border:none; /* Remove borders */
    outline:none; /* Remove outline */
    background-color:#0b70b5; /* Set a background color */
    color:#ffffff; /* Text color */
    cursor:pointer; /* Add a mouse pointer on hover */
    border-radius:50%; /* Rounded corners */
    font-size:23px; /* Increase font size */
}

#btnTop:hover {background-color:#ed8b18;color:#000000;}
.dashedStyleMoved {border:3px dashed #ff0000!important;}
.dashedStyleNewPosition {border:3px dashed #00ff40!important;}
.dashedStyleChangeSaved {border:3px dashed #000000!important;}

/* Added 03.08.2018 */
.table-borderless td, .table-borderless th { border: 0!important; }
</style>

</head>
<body style="margin:0;">

<table id="loader">
    <tr>
        <td><img src="../img/loader/loader_icons_set1/128x/Preloader_3.gif" alt="Chargement en cours..." /></td>
    </tr>
</table>

<div style="display:none;" id="divContentPage">

    <!-- https://www.w3schools.com/howto/howto_js_scroll_to_top.asp -->
    <!-- https://www.w3schools.com/howto/howto_css_round_buttons.asp -->
    <button onclick="topFunction()" id="btnTop" title="Haut de page"><i class="fa fa-arrow-circle-up" aria-hidden="true"></i></button>




<div class="row">
    <div class="col-lg-12 text-center alert alert-info">
        <h4>
        <i class="fa fa-info-circle" aria-hidden="true"></i> Salon No.11 : salon1 
        du 01/05/2019 08:00:00 au 31/05/2019 19:00:00        </h4>
    </div>
</div>

<div class="row">
    <div id="divExtraTable" class="col-lg-12">
    <table class="table table-borderless table-responsive table-condensed"></tr></table>    </div>
</div>

<div class="row">
    <div id="alertDangerDiv" class="col-md-4 text-center alert alert-danger">
        <button id="previousButton" class="btn btn-danger"><i class="fa fa-sign-out" aria-hidden="true"></i> Quitter cette page</button>
        <br/>
        <span id="msgInfoEmpty" class="text-danger"></span>
    </div>
    <div id="alertWarningDiv"  class="col-md-4 text-center alert alert-warning">
        <button id="btnReloadPlanning" class="btn btn-warning" onclick="reloadPlanning();"><i class="fa fa-calendar-times-o" aria-hidden="true"></i> Regénérer le planning (recommence à zéro)</button>
        <br/>
        <span id="msgInfoEmpty2" class="text-danger"></span>
    </div>
    <div id="alertSuccessDiv" class="col-md-4 text-center alert alert-success">
        <button id="btnSaveChanges" class="btn btn-success" onclick="saveChangesFunction();"><i class="fa fa-floppy-o" aria-hidden="true"></i> Enregistrer les modifications</button>
        <br/>
        <span id="msgInfoChangesNotSaved" class="text-danger"></span>
    </div>
</div>

<div class="row" style="padding: 5px">
    <div class="col-md-12">

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> MERCREDI 01 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_0');"></i>
    <i id="eyeIcon_table_0" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_0" data-tableName="Test Table 0">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> JEUDI 02 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_1');"></i>
    <i id="eyeIcon_table_1" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_1" data-tableName="Test Table 1">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> VENDREDI 03 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_2');"></i>
    <i id="eyeIcon_table_2" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_2" data-tableName="Test Table 2">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> LUNDI 06 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_3');"></i>
    <i id="eyeIcon_table_3" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_3" data-tableName="Test Table 3">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> MARDI 07 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_4');"></i>
    <i id="eyeIcon_table_4" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_4" data-tableName="Test Table 4">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> MERCREDI 08 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_5');"></i>
    <i id="eyeIcon_table_5" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_5" data-tableName="Test Table 5">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> JEUDI 09 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_6');"></i>
    <i id="eyeIcon_table_6" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_6" data-tableName="Test Table 6">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> VENDREDI 10 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_7');"></i>
    <i id="eyeIcon_table_7" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_7" data-tableName="Test Table 7">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> LUNDI 13 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_8');"></i>
    <i id="eyeIcon_table_8" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_8" data-tableName="Test Table 8">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> MARDI 14 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_9');"></i>
    <i id="eyeIcon_table_9" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_9" data-tableName="Test Table 9">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> MERCREDI 15 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_10');"></i>
    <i id="eyeIcon_table_10" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_10" data-tableName="Test Table 10">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> JEUDI 16 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_11');"></i>
    <i id="eyeIcon_table_11" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_11" data-tableName="Test Table 11">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> VENDREDI 17 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_12');"></i>
    <i id="eyeIcon_table_12" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_12" data-tableName="Test Table 12">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> LUNDI 20 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_13');"></i>
    <i id="eyeIcon_table_13" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_13" data-tableName="Test Table 13">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> MARDI 21 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_14');"></i>
    <i id="eyeIcon_table_14" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_14" data-tableName="Test Table 14">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> MERCREDI 22 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_15');"></i>
    <i id="eyeIcon_table_15" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_15" data-tableName="Test Table 15">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> JEUDI 23 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_16');"></i>
    <i id="eyeIcon_table_16" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_16" data-tableName="Test Table 16">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> VENDREDI 24 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_17');"></i>
    <i id="eyeIcon_table_17" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_17" data-tableName="Test Table 17">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> LUNDI 27 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_18');"></i>
    <i id="eyeIcon_table_18" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_18" data-tableName="Test Table 18">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> MARDI 28 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_19');"></i>
    <i id="eyeIcon_table_19" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_19" data-tableName="Test Table 19">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> MERCREDI 29 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_20');"></i>
    <i id="eyeIcon_table_20" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_20" data-tableName="Test Table 20">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> JEUDI 30 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_21');"></i>
    <i id="eyeIcon_table_21" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_21" data-tableName="Test Table 21">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>

    

<h3 class="text-center">
    <i class="fa fa-calendar" aria-hidden="true"></i> VENDREDI 31 MAI 2019    <i class="fa fa-file-excel-o" style="cursor:pointer;color:#217346" aria-hidden="true" onclick="exportToExcel('table_22');"></i>
    <i id="eyeIcon_table_22" class="fa fa-eye-slash eyeIcon" style="cursor:pointer;color:#0b70b5" aria-hidden="true"></i>
</h3>
<div class="table-responsive">
    <table class="table table-bordered table-condensed table2excel" id="table_22" data-tableName="Test Table 22">
        <thead>
            <tr>
                <th style="vertical-align:middle;text-align:center;">FOURNISSEUR</th>
                <th style="vertical-align:middle;text-align:center;">COMMERCIAL</th>
                <th>08H00 - 08H30</th>
                <th>08H30 - 09H00</th>
                <th>09H00 - 09h30</th>
                <th>09H30 - 10H00</th>
                <th>10H00 - 10H30</th>
                <th>10H30 - 11H00</th>
                <th>11H00 - 11H30</th>
                <th>11H30 - 12H00</th>
                
                                <th style="background-color:#f1f3f6;">12H00 - 13H00</th>
                <th>13H00 - 13H30</th>
                <th>13H30 - 14H00</th>
                                <th>14H00 - 14H30</th>
                <th>14H30 - 15H00</th>
                <th>15H00 - 15H30</th>
                <th>15H30 - 16H00</th>
                <th>16H00 - 16H30</th>
                <th>16H30 - 17H00</th>
                <th>17H00 - 17H30</th>
                <th>17H30 - 18H00</th>
                <th>18H00 - 18H30</th>
                <th>18H30 - 19H00</th>
            </tr>
        </thead>
        <tbdody>
                    </tbdody>

    </table></div>


    </div></div>
</div>

</body>
</html>

<script src="../js/jquery-3.1.1.min.js"></script>
<script src="../js/plugins/table2excel/jquery.table2excel.js"></script>

<!-- Toastr script -->
<script src="../js/plugins/toastr/toastr.min.js"></script>

<!-- Mousetrap script -->
<script src="../js/plugins/mousetrap/mousetrap.min.js"></script>

<script>
var changesToSave = []; // Empty array, do not define it in document.ready function else the variable is not visible for the entire page
var eventTemp = '';

// Toastr options - Added 02.08.2018 and updated 12.09.2018 : Fix bug reported by Elodie
toastr.options = {
  "closeButton": true,
  "debug": false,
  "newestOnTop": false,
  "progressBar": true,
  "positionClass": "toast-top-left",
  "preventDuplicates": true,
  "onclick": null,
  "showDuration": "300",
  "hideDuration": "1000",
  "timeOut": "2000",
  "extendedTimeOut": "1000",
  "showEasing": "swing",
  "hideEasing": "linear",
  "showMethod": "fadeIn",
  "hideMethod": "fadeOut"
}

function exportToExcel(idTable) {
    $("#" + idTable).table2excel({
        exclude: ".noExl",
        name: "Planning",
        filename: "planning" + new Date().toISOString().replace(/[\-\:\.]/g, ""),
        fileext: ".xls",
        exclude_img: true,
        exclude_links: true,
        exclude_inputs: true
    });
}

//https://developer.mozilla.org/en-US/docs/Web/Guide/Parsing_and_serializing_XML
//https://www.w3schools.com/jquery/ajax_post.asp
//https://stackoverflow.com/questions/14621243/get-the-whole-documents-html-with-javascript-jquery
//https://stackoverflow.com/questions/817218/how-to-get-the-entire-document-html-as-a-string
// For updateing the planning you need a PHP script because JS cannot manipulate files
function saveChangesFunction() {
    
    if(changesToSave.length == 0) {
        $('#toast-container').remove(); // Fix bug 12.09.2018 reported by Elodie
        toastr.error('Veuillez effectuer au moins une modification.', 'Échec.');
    }
    else {
                
        var sendEmails = prompt('Envoyer les emails aux Magasins/Fournisseurs ? (O/N, défaut N)', 'N');
        if (sendEmails === null) { return; }
    
        if (sendEmails.toUpperCase().trim() === 'O') {
    
            // Mails sent correctly ?
            $.post(
                './../ajax/sendMail.php',
                {
                      enterprisesToContact : getAllEnterprisesToContact()
        //            planningContent : new XMLSerializer().serializeToString(document)
    //                        idPurchasingFair : ,
    //                        planningContent : '<!DOCTYPE html>' + document.documentElement.outerHTML
                },
                function(data) {
                    if(data.trim() === 'OK') { 
                        toastr.success('Envoi email(s) réussi.', 'Succès.');
                        // https://stackoverflow.com/questions/1232040/how-do-i-empty-an-array-in-javascript
                        changesToSave = [];                         
                    }
                    else {
                        toastr.error('<a href="./../admin_email_errors_check.php">Cliquez ici pour + de détails</a>', 'Erreur envoi emails.');
                    }
                },
                'text'
            );
            // End Mail check
        
        }
        else {
            changesToSave = [];
            toastr.success('Choix de ne pas envoyer les emails pris en compte.', 'Succès.');
        }
        
        // Reset borders planning
        $('.dashedStyleMoved').removeClass('dashedStyleMoved');
        $('.dashedStyleNewPosition').addClass('dashedStyleChangeSaved');
        $('.dashedStyleNewPosition').removeClass('dashedStyleNewPosition');   
        
        $('#toast-container').remove(); // Fix bug 12.09.2018 reported by Elodie
        
        // Update (get all page content to file)
        $.post(
            './../ajax/updatePlanning.php',
            {
    //            planningContent : new XMLSerializer().serializeToString(document)
                idPurchasingFair : 11,
                planningContent : '<!DOCTYPE html>' + document.documentElement.outerHTML
            },
            function(data) {
                if(data.trim() === 'Success') { 
                    toastr.success('Mise à jour réussie', 'Succès.');

                    // https://stackoverflow.com/questions/8562583/add-element-to-array-associative-arrays
                    $('#msgInfoChangesNotSaved').html('');
                    $('#msgInfoEmpty').html('');
                    $('#msgInfoEmpty2').html('');
                }
                else {
                    toastr.error('Mise à jour échouée', 'Échec.');
                }
            },
            'text'
        );
    }
}

function reloadPlanning() {
    $.post(
        './../ajax/reloadPlanning.php',
        {
//            planningContent : new XMLSerializer().serializeToString(document)
        },
        function(data) {
            if(data.trim() === 'Success') { 
                location.assign('./planning_loader_all.php');
            }
            else {
                toastr.error('Regénération échouée.', 'Échec.');
            }
        },
        'text'
    );
}

function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
        document.getElementById("btnTop").style.display = "block";
    } else {
        document.getElementById("btnTop").style.display = "none";
    }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
    document.body.scrollTop = 0; // For Safari
    document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
}

function getAllEnterprisesToContact() {
    var arrayMoved = [];
    var arrayNewPosition = [];

    // Retrieves the names of providers for whom the appointment has moved
    $('.dashedStyleMoved').each(function () {
        arrayMoved.push($(this).closest('tr').find('td:first').attr('class').substring(14)); // Add Ids Providers
    });

    // retrieves the name stores for which an appointment is moved and the name of the associated provider
    // The find() method returns descendant elements of the selected element.
    $('.dashedStyleNewPosition').each(function () {
        arrayNewPosition.push($(this).find('div').attr('class').split(' ')[1].substring(11)); // Add Id Store
        arrayMoved.push($(this).closest('tr').find('td:first').attr('class').substring(14)); // Add Ids New or Same Provider
    });

    return JSON.stringify(arrayMoved.concat(arrayNewPosition));
}

// https://www.html5rocks.com/en/tutorials/dnd/basics/
// https://stackoverflow.com/questions/23472505/drag-and-drop-table-cell-contents
// http://jsfiddle.net/videma/2RuBh/
var previousColor = '';
var previousId = '';

$(document).ready(function(){
    $("#loader").hide();
    $("#divContentPage").show();
        
    // When the user scrolls down 20px from the top of the document, show the button
    window.onscroll = function() {scrollFunction()};
    
    $(".eyeIcon").click(function(){
        
        var idEye = $(this).attr('id');
        var idTable = idEye.substring(8);
        
        // Show
        if( $(this).hasClass("fa-eye") ) {
            $(this).removeClass("fa-eye");
            $(this).addClass("fa-eye-slash");
            $('#' + idTable).toggle();
            // The toggle() method toggles between hide() and show() for the selected elements.
            //https://www.w3schools.com/jquery/eff_toggle.asp
        }
        // hide
        else {
            $(this).removeClass("fa-eye-slash");
            $(this).addClass("fa-eye");
            $('#' + idTable).toggle();
        }      
    });
    
    // Previous button
    $("#previousButton").click(function(){ window.location.assign('./../purchasing_fair_list.php'); });

    // https://www.html5rocks.com/en/tutorials/dnd/basics/
    // https://www.w3schools.com/jquery/traversing_parent.asp
    // https://www.w3schools.com/jquery/traversing_closest.asp
    // https://stackoverflow.com/questions/3203966/jquery-get-the-first-class-only-from-a-element
    $('.event').on("dragstart", function (event) {
        var dt = event.originalEvent.dataTransfer;
        dt.setData('Text', $(this).attr('id'));
        previousColor = $(this).css('background-color');
        previousId = $(this).parent().attr('id');
        // The closest() method returns the first ancestor of the selected element.
        // I don't use parent() beceause it returns <td> element
//        console.log($(this).closest('tr').find('td:first').attr('class')); // Provider
//        console.log($(this).attr('class').split(' ')[1]); // Store
        changesToSave.push({
                idOldProvider : $(this).closest('tr').find('td:first').attr('class').substring(14),
                idStore : $(this).attr('class').split(' ')[1].substring(11)
        });
//        console.log(previousColor);
//        console.log(previousId);
      });
    $('table td').on("dragenter dragover drop", function (event) {	
        event.preventDefault();
        if (event.type === 'drop') {
//               console.log($(this).text());
//               console.log($(this).children().length > 0);
            if($(this).text() != '' || $(this).children().length > 0 || $(this).closest('tr').hasClass('addedTr')) {
//              alert('Non autorisé');
                toastr.error('Déplacement non autorisé.', 'Échec.');
            }
            else {
               var data = event.originalEvent.dataTransfer.getData('Text',$(this).attr('id'));
               de=$('#'+data).detach();
               de.appendTo($(this));
//               console.log($(this).attr('id'));
//               console.log($('#'+$(this).attr('id')).parent());
                $(this).css('background-color', previousColor);
//                $(this).css('border', '3px dashed #ff0000');
                if( $(this).hasClass('dashedStyleMoved')) { $(this).removeClass('dashedStyleMoved'); }
                if( !$(this).hasClass('dashedStyleNewPosition')) { $(this).addClass('dashedStyleNewPosition'); }
//                console.log(!$(this).hasClass('dashedStyle'));
//                console.log($(this).closest('tr').find('td:first').attr('class'));
                changesToSave.push({ idNewProvider : $(this).closest('tr').find('td:first').attr('class').substring(14) }); // add a new object
                $('#' + previousId).css('background-color', '#ffffff');
                if( $('#' + previousId).hasClass('dashedStyleNewPosition')) { $('#' + previousId).removeClass('dashedStyleNewPosition'); }
                if( $('#' + previousId).hasClass('dashedStyleChangeSaved')) { $('#' + previousId).removeClass('dashedStyleChangeSaved'); }
                if( !$('#' + previousId).hasClass('dashedStyleMoved')) { $('#' + previousId).addClass('dashedStyleMoved'); }
                $('#' + previousId).css('border', '1px solid #ddd!important');
                $('#msgInfoChangesNotSaved').html('<i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Pensez à sauvegarder votre travail');
                $('#msgInfoEmpty').html('<br/>');
                $('#msgInfoEmpty2').html('<br/>');
           }
        };
   });
   
    // Info on click class event
    // https://teamtreehouse.com/community/having-trouble-selecting-dynamically-created-elements-with-jquery
    $('td').on("click", ".event", function (event) { 
        toastr.warning('Vous avez sélectionné une case contenant [' + $(this).text() + '], vous pouvez utiliser un raccourci clavier.', 'Information.');
        eventTemp = $(this).clone();
        //console.log(eventTemp);
    });
   
    // Mousetrap
    
    // Copy appointment
    Mousetrap.bind('ctrl c', function() { 
        if(eventTemp.length) {
            toastr.success('Le rendez-vous a été copié. Cliquez sur une autre case pour effectuer la copie.','Information.');
            $('#msgInfoChangesNotSaved').html('<i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Pensez à sauvegarder votre travail');
            $('#msgInfoEmpty').html('<br/>');
            $('#msgInfoEmpty2').html('<br/>');
        }
        else { 
            toastr.error('Veuillez d\'abord cliquer sur un rendez-vous.', 'Erreur.');
        }
    });
    
    // Remove appointment
    Mousetrap.bind('ctrl r', function() { 
        if(eventTemp.length) {
            $('#' + eventTemp.attr('id')).parent().css('background-color', '#ffffff');
            
            if( $('#' + eventTemp.attr('id')).parent().hasClass('dashedStyleNewPosition')) { $('#' + eventTemp.attr('id')).parent().removeClass('dashedStyleNewPosition'); }
            if( $('#' + eventTemp.attr('id')).parent().hasClass('dashedStyleChangeSaved')) { $('#' + eventTemp.attr('id')).parent().removeClass('dashedStyleChangeSaved'); }
            if( $('#' + eventTemp.attr('id')).parent().hasClass('dashedStyleMoved')) { $('#' + eventTemp.attr('id')).parent().removeClass('dashedStyleMoved'); }
            
            $('#' + eventTemp.attr('id')).parent().addClass('dashedStyleMoved');
            
            changesToSave.push({
                idOldProvider : $('#' + eventTemp.attr('id')).closest('tr').find('td:first').attr('class').substring(14),
                idStore : $('#' + eventTemp.attr('id')).attr('class').split(' ')[1].substring(11)
            });
            
            $('#' + eventTemp.attr('id')).remove();
            eventTemp = "";
            toastr.success('Le rendez-vous a bien été supprimé.','Information.');
            $('#msgInfoChangesNotSaved').html('<i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Pensez à sauvegarder votre travail');
            $('#msgInfoEmpty').html('<br/>');
            $('#msgInfoEmpty2').html('<br/>');
        }
        else { 
            toastr.error('Veuillez d\'abord cliquer sur un rendez-vous !', 'Erreur.');
        }    
    });
    
    // Move appointment
    Mousetrap.bind('ctrl m', function() { 
        if(eventTemp.length) {
            $('#' + eventTemp.attr('id')).parent().css('background-color', '#ffffff');
            
            if( $('#' + eventTemp.attr('id')).parent().hasClass('dashedStyleNewPosition')) { $('#' + eventTemp.attr('id')).parent().removeClass('dashedStyleNewPosition'); }
            if( $('#' + eventTemp.attr('id')).parent().hasClass('dashedStyleChangeSaved')) { $('#' + eventTemp.attr('id')).parent().removeClass('dashedStyleChangeSaved'); }
            if( $('#' + eventTemp.attr('id')).parent().hasClass('dashedStyleMoved')) { $('#' + eventTemp.attr('id')).parent().removeClass('dashedStyleMoved'); }
            
            $('#' + eventTemp.attr('id')).parent().addClass('dashedStyleMoved');
            
            changesToSave.push({
                idOldProvider : $('#' + eventTemp.attr('id')).closest('tr').find('td:first').attr('class').substring(14),
                idStore : $('#' + eventTemp.attr('id')).attr('class').split(' ')[1].substring(11)
            });
            
            $('#' + eventTemp.attr('id')).remove();
            toastr.success('Le rendez-vous a été copié. Cliquez sur une autre case pour effectuer le déplacement.','Information.');
            $('#msgInfoChangesNotSaved').html('<i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Pensez à sauvegarder votre travail');
            $('#msgInfoEmpty').html('<br/>');
            $('#msgInfoEmpty2').html('<br/>');
        }
        else { 
            toastr.error('Veuillez d\'abord cliquer sur un rendez-vous !', 'Erreur.');
        }
    });
    
    // Cancel action
//    Mousetrap.bind('ctrl q', function() { 
//        if(eventTemp.length && !$('#' + eventTemp.attr('id')).parent().children().length) {
//            $('#' + eventTemp.attr('id')).parent().append(eventTemp);
//            toastr.success('Action annulée.','Information.');
//            eventTemp = "";
//        }
//        else { 
//            toastr.error('Veuillez d\'abord cliquer sur un rendez-vous !', 'Erreur.');
//        }
//    });
//    
    $('td').on("click", function (event) {
        if(eventTemp.length && $(this).text() === '' && $(this).children().length === 0 && !$(this).closest('tr').hasClass('addedTr')) {
            $(this).append(eventTemp);
            
            // https://www.w3schools.com/jquery/jquery_traversing_siblings.asp
            // https://www.w3schools.com/jsref/jsref_split.asp
            // https://stackoverflow.com/questions/27509/detecting-an-undefined-object-property
            if (typeof $(this).prev().attr('id') === 'undefined') { // If I put an appoitnment in the first timeslot of a row
                var previousTdIdSplitted = $(this).next().attr('id').split('_'); // Get id of the next td
                var newTimeSlotNumberInId = parseInt(previousTdIdSplitted[6], 10) - 1; // Decrease timeslot value
            }
            else {
                var previousTdIdSplitted = $(this).prev().attr('id').split('_'); // Get Previous td id splitted
                var newTimeSlotNumberInId = parseInt(previousTdIdSplitted[6], 10) + 1; // Increase timeslot value
            }
            
            $(this).find('div').attr('id', 
                    'div_' +
                    previousTdIdSplitted[1] + '_' +
                    previousTdIdSplitted[2] + '_' +
                    previousTdIdSplitted[3] + '_' +
                    previousTdIdSplitted[4] + '_' +
                    previousTdIdSplitted[5] + '_' +
                    newTimeSlotNumberInId);
            $(this).css('background-color', eventTemp.css('background-color'));
            $(this).addClass('dashedStyleNewPosition');
            eventTemp = "";
            toastr.success('Le rendez-vous a bien été placé.','Information.');
            
            changesToSave.push({
                idNewProvider : $(this).closest('tr').find('td:first').attr('class').substring(14),
                idStore : $(this).children().attr('class').split(' ')[1].substring(11)
            });
        }
        else { 
            // nothing
        }
    });

});

</script>
